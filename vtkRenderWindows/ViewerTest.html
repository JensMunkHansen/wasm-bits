<!doctype html>
<html>

<head>
<meta charset="utf-8" />
  <title>WASM Viewer with Two Canvases</title>
<style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
    }
    .canvas-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    canvas {
      display: block;
      max-width: 100%;
      max-height: 100%;
    }
  </style>
</head>
<body>
  <div class="canvas-container">
    <canvas id="canvas1"></canvas>
  </div>
  <div class="canvas-container">
    <canvas id="canvas2"></canvas>
  </div>  
  <script type="module">
    import createViewerModule from './Viewer.js';
    (async function() {
	// Define options for the WASM module
	const options = {
            print: function(...args) {
		console.info(...args);
            },
            printErr: function(...args) {
		console.error(...args);
            },
	};

	// Load the WebAssembly module
	let wasmModule = await createViewerModule(options);

	const canvas1 = document.getElementById('canvas1');
	const canvas2 = document.getElementById('canvas2');

	// Initialize the viewer
	function setupViewer(canvasId) {
            const viewer = new wasmModule.vtkViewer();

	    viewer.initialize(canvasId);
	    viewer.addData();
	    viewer.setSize(150, 300);
	    viewer.resetView();
	    viewer.render();
	    //viewer.run();
	    
            function animate() {
		viewer.render(); // Ensure your viewer has a render function
		requestAnimationFrame(animate);
            }

            // Start the animation loop
            animate();
	}

	// Setup viewers for both canvases
	setupViewer('canvas1');
	setupViewer('canvas2');
    })();
  </script>
</body>
</html>
